@page
@model POS.Pages.IndexModel

@{
    ViewData["Title"] = "POS - Coffee Shop";
}

<style>
    @@media print {
        body *

    {
        visibility: hidden;
    }

    #printArea,
    #printArea * {
        visibility: visible;
    } 

    #printArea {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
    }

    .no-print {
        display: none !important;
    }

    }
</style>


<div class="container-fluid mt-4">
    <div class="row">
        <!-- struk di kiri (print area) -->
        <div id="printArea" class="col-md-4 bg-light p-3 rounded shadow-sm">
            <h4 class="text-center mb-3">Struk Pembelian</h4>
            <div id="clock" class="text-center fw-bold mb-3"></div>

            <table class="table table-bordered text-center align-middle">
                <thead class="table-secondary">
                    <tr>
                        <th>Nama</th>
                        <th>Qty</th>
                        <th>Harga</th>
                    </tr>
                </thead>
                <tbody id="cartBody"></tbody>
            </table>

            <div class="mt-3">
                <h6 class="text-end">Subtotal: Rp <span id="subtotal">0</span></h6>
                <h6 class="text-end">PPN (10%): Rp <span id="taxAmount">0</span></h6>
                <h5 class="text-end fw-bold mt-2">Total Bayar: Rp <span id="totalAmount">0</span></h5>
            </div>

            <div class="d-grid mt-3 gap-2 no-print">
                <button class="btn btn-primary" onclick="saveTransaction('print')">Print Struk</button>
                <input type="text" id="waNumber" placeholder="08xxxxxxxxxx" />
                <button class="btn btn-success" onclick="saveTransaction('whatsapp')">Kirim via WhatsApp</button>
            </div>
        </div>

        <!-- bagian kanan -->
        <div class="col-md-8">
            <h4 class="mb-3 text-center">Daftar Produk</h4>
            <div class="row overflow-auto" style="max-height: 75vh;">
                @foreach (var item in Model.Products)
                {
                    <div class="col-md-3 mb-4">
                        <div class="card shadow-sm border-0">
                            <img src="@item.ImageUrl" class="card-img-top" alt="@item.Name" style="height:150px; object-fit:cover;">
                            <div class="card-body text-center">
                                <h6>@item.Name</h6>
                                <p class="text-muted">Rp @item.Price.ToString("N0")</p>
                                <button class="btn btn-primary btn-sm add-btn"
                                        data-name="@item.Name"
                                        data-price="@item.Price">
                                    Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>


<script src="~/js/pos.js"></script>
